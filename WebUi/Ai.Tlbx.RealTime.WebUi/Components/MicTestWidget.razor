@page "/mictest"

<h3>Microphone Test</h3>

<div class="mic-test-container">
    @if (Loading)
    {
        <div class="spinner">Loading...</div>
    }
    <button @onclick="StartTest">Start Test</button>
    <div class="mic-level">Level: @MicLevel</div>
</div>

@code {
    [Parameter] public int MicLevel { get; set; } = 0;
    [Parameter] public bool Loading { get; set; } = false;
    [Parameter] public EventCallback OnStartTest { get; set; }

    private async Task StartTest()
    {
        await OnStartTest.InvokeAsync();
    }

    // Placeholder for updating mic level from audio data
    public void UpdateMicLevel(int level)
    {
        MicLevel = level;
        StateHasChanged();
    }
}
